<div class="admin-page">

  <!-- ===== Loading State ===== -->
  <div *ngIf="loading$ | async" class="loading">
    Loading admin data...
  </div>

  <ng-container *ngIf="!(loading$ | async)">

    <!-- ===== Header ===== -->
    <div class="page-header">
      <h2>Admin Panel</h2>
      <p>Manage users, roles, and system activity.</p>
    </div>

    <!-- ===== Stats ===== -->
    <section class="stats-grid" *ngIf="stats$ | async as stats">

      <div class="stat-card">
        <h3>{{ stats.totalUsers }}</h3>
        <p>Total Users</p>
      </div>

      <div class="stat-card">
        <h3>{{ stats.totalTasks }}</h3>
        <p>Total Tasks</p>
      </div>

      <div class="stat-card">
        <h3>{{ stats.inProgressTasks }}</h3>
        <p>Active Today</p>
      </div>

      <div class="stat-card warning">
        <h3>{{ stats.pendingTasks }}</h3>
        <p>Pending Approvals</p>
      </div>

    </section>

    <!-- ===== Users Table ===== -->
    <section class="table-card">

      <div class="table-header">
        <h4>User Management</h4>
        <button class="primary-btn">+ Add User</button>
      </div>

      <div class="table-wrapper" *ngIf="users$ | async as users">

        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Email</th>
              <th>Role</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>

          <tbody>
            <tr *ngFor="let user of users; trackBy: trackById">

              <td>{{ user.name }}</td>
              <td>{{ user.email }}</td>

              <td>
                <span class="role" [ngClass]="user.role.toLowerCase()">
                  {{ user.role }}
                </span>
              </td>

              <td>
                <span class="status active">Active</span>
              </td>

              <td>
                <button class="action-btn">Edit</button>
                <button
                  class="action-btn danger"
                  (click)="deleteUser(user.id)">
                  Delete
                </button>
              </td>

            </tr>

            <!-- Empty State -->
            <tr *ngIf="users.length === 0">
              <td colspan="5" class="empty-state">
                No users found.
              </td>
            </tr>

          </tbody>
        </table>

      </div>
    </section>

  </ng-container>
</div>
